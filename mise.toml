[tasks.format]
description = "Format code with Ruff"
run = "ruff format ."

[tasks.lint]
description = "Lint sources with Ruff"
run = "ruff check src/aiotgbot tests"

[tasks.mypy]
description = "Type-check with mypy --strict"
run = "mypy --strict ."

[tasks.basedpyright]
description = "Type-check with basedpyright"
run = "basedpyright"

[tasks.coverage]
description = "Run pytest with coverage reports"
env = { COVERAGE_FILE = ".coverage/.coverage" }
run = """
python -m pytest --cov=aiotgbot --cov-report term --cov-report html:.coverage tests
"""

[tasks.test]
description = "Run unit tests"
run = "python -m pytest tests"

[tasks.all]
description = "Format, lint, type-check, and test"
depends = ["format", "lint", "mypy", "basedpyright", "test"]
run = "true"
